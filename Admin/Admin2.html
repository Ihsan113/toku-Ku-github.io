<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Verifikasi Email</title>
  <!-- Sertakan referensi ke Firebase dan script verify-email.js -->
  <script src="https://www.gstatic.com/firebasejs/7.20.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.20.0/firebase-auth.js"></script>
  <script>
    // Inisialisasi Firebase (gunakan konfigurasi Firebase yang sesuai)
    const firebaseConfig = {
      apiKey: "AIzaSyDPp8I8Xp-qZg65GxEX8_ETxvrZCDG8454",
      authDomain: "bisnis-532f5.firebaseapp.com",
      projectId: "bisnis-532f5",
      storageBucket: "bisnis-532f5.appspot.com",
      messagingSenderId: "351800625123",
      appId: "1:351800625123:web:8abff984b15be7a00bc2d6",
      measurementId: "G-TJJBQ9TF7S"
    };
    firebase.initializeApp(firebaseConfig);

    // Mengecek status masuk pengguna secara terus-menerus
    firebase.auth().onAuthStateChanged(function(user) {
      if (user) {
        document.getElementById('userEmail').innerText = `Email: ${user.email || 'Belum diatur'}`;
        document.getElementById('verificationMessage').innerText = `Status verifikasi: ${user.emailVerified ? 'Telah diverifikasi' : 'Belum diverifikasi'}`;
      } else {
        window.location.href = 'login.html';
      }
    });

    function sendVerificationEmail() {
      const user = firebase.auth().currentUser;

      user.sendEmailVerification()
        .then(() => {
          console.log('Email verifikasi berhasil dikirim');
          alert('Email verifikasi berhasil dikirim. Silakan periksa kotak masuk Anda.');
        })
        .catch((error) => {
          console.error('Gagal mengirim email verifikasi:', error.message);
          alert('Gagal mengirim email verifikasi. Silakan coba lagi.');
        });
    }
  </script>
</head>
<body>
  <h1>Halaman Verifikasi Email</h1>
  <p id="userEmail"></p>
  <p id="verificationMessage"></p>
  <button onclick="sendVerificationEmail()">Kirim Email Verifikasi</button>
  <!-- Sertakan elemen lain atau UI yang diperlukan -->
</body>
</html>